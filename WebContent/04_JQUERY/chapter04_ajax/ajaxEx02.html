<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ajax</title>
<script src="../js/jquery-3.6.0.min.js"></script>
<script>

	/*
	
		# Ajax(Asynchronous JavaScript and XML)
		
		- 웹 페이지 전체를 다시 로딩하지 않고도, 웹 페이지의 일부분만을 갱신하여 사용할 수 있다.
		- 페이지의 전환 없이 서버와 통신하여, 그 결과를 웹 페이지의 일부분에만 표시할 수 있다.
		- 서버에서 처리가 완료될때까지 기다리지 않고 페이지 이동 없이 다른 프로세스를 진행할 수 있다.
		- 서버와 주고받을 수 있는 데이터 형식은 JSON,XML,HTML,텍스트 파일 등이 있다.
		
	 	[ 형식 ]
		
		 $.ajax({
			 url: "",
			 type: "",
			 async:"",
			 cache: ,
			 dataType: "",
			 data: "",
			 success: function(res, status){
			 },
			 error: function(request, status, error){
			 },
			 complete : function(){
			 }
		});
	
		1) url      : 요청이 전송될 URL주소를 작성한다.
		2) type     : 데이터 전송방식( GET 또는 POST )을 작성한다.
		3) async	: true가 기본이며 비동기식으로 동작한다. false로 설정하게되면 동기방식으로 동작한다.
		4) cache    : 요청 페이지의 캐시 여부(false 또는 true)를 작성한다. 
		5) datatype : 서버에서 받아올 데이터를 어떤 형태(xml, json, html, script)로 해석할 것인지를 작성한다.
		6) data     : 서버에 전송하고 싶은 데이터를 작성한다.
		7) success  : Ajax 통신에 성공했을 때 실행되는 이벤트 (함수의 인자로 응답본문과 상태를 돌려받는다.)
		8) error    : Ajax 통신에 실패했을 때 실행되는 이벤트 (request, status, error로 에러 정보를 확인할 수 있다.)
		9) complete : Ajax 통신의 성공 및 실패와 상관없이 반드시 실행되는 이벤트
	
	*/
	
	$().ready(function(){
		
		$("#login").click(function(){
			
			// json형식의 data set 예시
			var params = {
				"id" : $("#id").val(),
				"pwd" : $("#pwd").val()
			};
			
			// ajax 통신
			$.ajax({
				
				url  : "ajaxEx02_pro.jsp",		// 요청이 전송될 URL주소
				type : "post",					// http 요청방식 (get, post)
				data : params ,					// 전송될 데이터 형식(JSON)
				success : function() {			// 통신이 성공할 경우 실행되는 함수
					$("#id").prop("disabled" , true);
					$("#pwd1").prop("disabled" , true);
				},
				error : function() {			// 통신이 실패할 경우 실행되는 함수
					alert("통신실패");
				},
				complete : function() {			// 반드시 실행되는 함수
					console.log("통신 종료")
				}
				
			});
			
		});
		
	});
	
</script>
</head>
<body>
	<form>
		<fieldset>
			<legend>로그인</legend>
			<p><label for="id">id : </label><input type="text" id="id"></p>
			<p><label for="pwd">pwd : </label><input type="password" id="pwd"></p>
			<input type="button" id="login" value="로그인">
		</fieldset> 
	</form>
</body>
</html>